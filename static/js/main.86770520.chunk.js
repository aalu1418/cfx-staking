(this["webpackJsonpcfx-staking"]=this["webpackJsonpcfx-staking"]||[]).push([[0],{128:function(t,e,n){},130:function(t,e,n){},143:function(t,e){},145:function(t,e){},154:function(t,e){},156:function(t,e){},182:function(t,e){},183:function(t,e){},188:function(t,e){},190:function(t,e){},214:function(t,e){},262:function(t){t.exports=JSON.parse('[{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"deposit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"uint256","name":"blockNumber","type":"uint256"}],"name":"getLockedStakingBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getStakingBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"uint256","name":"blockNumber","type":"uint256"}],"name":"getVotePower","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"unlockBlockNumber","type":"uint256"}],"name":"voteLock","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},263:function(t,e,n){},264:function(t,e,n){},265:function(t,e,n){},266:function(t,e,n){"use strict";n.r(e);var a=n(2),c=n(3),u=n.n(c),s=n(122),r=n.n(s),i=(n(128),n(8)),o=n(11),l=n.n(o),d=n(17),p=(n(130),n.p+"static/media/cfx_logo.1c4567c4.jpg"),f=n(131).Conflux,b=n(132),j=n(262),x=(new f).Contract({abi:j,address:"0x0888000000000000000000000000000000000002"}),v=function(){var t=Object(d.a)(l.a.mark((function t(e,n){var a,c,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=x.getStakingBalance(n),t.prev=1,t.next=4,e.send("cfx_call",[{to:x.address,data:a.data}]);case 4:return c=t.sent,u=b.format.bigInt(c),t.abrupt("return",b.unit.fromDripToCFX(u));case 9:return t.prev=9,t.t0=t.catch(1),console.log("checkBalance: ",t.t0),t.abrupt("return",0);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}(),m=function(){var t=Object(d.a)(l.a.mark((function t(e,n,a){var c,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=x[n](b.unit.fromCFXToDrip(a)),console.log(c),t.prev=2,t.next=5,e.send("cfx_sendTransaction",[{to:x.address,data:c.data,from:window.conflux.selectedAddress,gas:"21000"}]);case 5:return u=t.sent,t.abrupt("return",u);case 9:return t.prev=9,t.t0=t.catch(2),console.log("sendTransaction: ",t.t0),t.abrupt("return",void 0);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n,a){return t.apply(this,arguments)}}(),h=function(t){var e=t.connected,n=t.setTx,c=t.chainID,s=u.a.useState(!0),r=Object(i.a)(s,2),o=r[0],f=r[1],b=u.a.useState(""),j=Object(i.a)(b,2),x=j[0],h=j[1],w=u.a.useState("0.0"),O=Object(i.a)(w,2),k=O[0],y=O[1],g=u.a.useState(!0),S=Object(i.a)(g,2),N=S[0],T=S[1],C=u.a.useState(!1),M=Object(i.a)(C,2),I=M[0],B=M[1];u.a.useEffect((function(){T(Number(x)<=0)}),[x]),u.a.useEffect((function(){e.value&&v(window.conflux,window.conflux.selectedAddress).then((function(t){return y(String(t))}))}),[e.value,I,c]);var A=function(){var t=Object(d.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return T(!0),t.next=3,m(window.conflux,o?"deposit":"withdraw",x);case 3:e=t.sent,n(e),h(""),B(!I),T(!1);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"StakeMenu",children:[Object(a.jsxs)("div",{className:"StakeMenu-Input-Container",children:[Object(a.jsx)("div",{className:"StakeMenu-Input-Label",children:"Amount"}),Object(a.jsxs)("div",{className:"StakeMenu-Input",children:[Object(a.jsx)("input",{className:"StakeMenu-Input-Input",placeholder:"0.0",value:x,onChange:function(t){var e=t.target.value;h(Number(e)||"0."===e||""===e||"0"===e?e:x)}}),Object(a.jsxs)("div",{className:"StakeMenu-Input-Token",children:[Object(a.jsx)("img",{src:p,className:"StakeMenu-Logo",alt:"cfx_logo"}),"CFX"]})]})]}),Object(a.jsxs)("div",{className:"StakeMenu-Current",children:["Currently Staked: ",k]}),Object(a.jsxs)("div",{className:"StakeMenu-Button-Container",children:[Object(a.jsx)("button",{className:"StakeMenu-Button Left ".concat(o?"Active":"Disabled"),onClick:function(){return f(!o)},children:"Deposit"}),Object(a.jsx)("button",{className:"StakeMenu-Button Right ".concat(o?"Disabled":"Active"),onClick:function(){return f(!o)},children:"Withdraw"})]}),Object(a.jsx)("button",{className:"StakeMenu-Send",disabled:!(!N&&e.value),onClick:A,children:"Send Transaction"})]})};n(263);var w=function(t){var e=t.connected,n=u.a.useState(!1),c=Object(i.a)(n,2),s=c[0],r=c[1],o=u.a.useState(""),p=Object(i.a)(o,2),f=p[0],b=p[1];u.a.useEffect((function(){window.conflux&&r(!0)}),[]);var j=function(){var t=Object(d.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s){t.next=4;break}window.open("https://portal.conflux-chain.org/"),t.next=15;break;case 4:return t.prev=4,t.next=7,window.conflux.enable();case 7:n=t.sent,b(n[0]),e.set(!0),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),console.log("Portal connection denied by user");case 15:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"Nav",children:Object(a.jsxs)("button",{className:"Nav-Button",onClick:j,children:[Object(a.jsx)("span",{className:"".concat(s?"Nav-Button-Dot":""," ").concat(f?"":"Red")}),Object(a.jsx)("div",{className:"Nav-Button-Text",children:e.value?f:s?"Connect Portal":"Install Portal"})]})})},O=n(61),k=(n(264),function(t){var e=t.chainID,n=t.tx,c=u.a.useState({warn:!1,tx:!1}),s=Object(i.a)(c,2),r=s[0],o=s[1];u.a.useEffect((function(){o({warn:2===Number(e),tx:!1})}),[e]),u.a.useEffect((function(){o({warn:!1,tx:!!n}),setTimeout((function(){return o((function(t){return Object(O.a)(Object(O.a)({},t),{},{tx:!1})}))}),1e4)}),[n]);var l=function(){o({warn:!1,tx:!1}),console.log("here")};return Object(a.jsxs)("div",{className:"Alert-Container",children:[r.warn&&Object(a.jsxs)("div",{className:"Alert-Alert Warning",children:[Object(a.jsx)("div",{children:"Staking balance is unavailable on Oceanus"}),Object(a.jsx)("div",{class:"close",onClick:l,children:"\xd7"})]}),r.tx&&Object(a.jsxs)("div",{className:"Alert-Alert Success",children:[Object(a.jsx)("a",{href:"https://".concat(1===Number(window.conflux.networkVersion)?"testnet.":"","confluxscan.io/transactionsdetail/").concat(n),children:"View transaction on Confluxscan"}),Object(a.jsx)("div",{class:"close",onClick:l,children:"\xd7"})]})]})});n(265);var y=function(){var t=u.a.useState(!1),e=Object(i.a)(t,2),n=e[0],c=e[1],s=u.a.useState(1),r=Object(i.a)(s,2),o=r[0],l=r[1],d={value:n,set:c},p=u.a.useState(void 0),f=Object(i.a)(p,2),b=f[0],j=f[1];return u.a.useEffect((function(){window.conflux&&window.conflux.on("networkChanged",(function(){console.log("network change"),l(window.conflux.networkVersion)}))}),[d.value]),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(w,{connected:d}),Object(a.jsx)(h,{connected:d,setTx:j,chainID:o}),Object(a.jsx)(k,{chainID:o,tx:b})]})},g=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,267)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,u=e.getLCP,s=e.getTTFB;n(t),a(t),c(t),u(t),s(t)}))};r.a.render(Object(a.jsx)(u.a.StrictMode,{children:Object(a.jsx)(y,{})}),document.getElementById("root")),g()}},[[266,1,2]]]);
//# sourceMappingURL=main.86770520.chunk.js.map